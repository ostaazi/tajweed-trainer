<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Tajweedy — التقارير</title>
  <style>
    @font-face{
      font-family:"UthmaniHafs";
      src:url("./assets/fonts/hafs.woff2") format("woff2");
      font-display:swap;
    }
    :root{
      --brand:#166b3b; --ink:#0f172a; --muted:#64748b;
      --bg:#f7f8fb; --card:#ffffff; --accent:#e6f4ea;
    }
    html.dark{ --bg:#0b1220; --card:#0f172a; --ink:#e5e7eb; --muted:#9aa4b2; --accent:#13361f; }

    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,"Tajawal","Noto Sans Arabic",Arial,sans-serif}
    .container{max-width:960px;margin:auto;padding:20px 16px}

    .report-page{
      position:relative;background:var(--card);border:1px solid rgba(2,6,12,.06);
      border-radius:14px;box-shadow:0 10px 28px rgba(2,6,12,.06);
      padding:22px 22px 96px;margin:18px auto;overflow:hidden
    }
    .report-page::before{
      content:"";position:absolute;inset:10% 0 0 0;margin:auto;width:68%;height:68%;
      background:url("./assets/logo/tajweedy-logo.png") center/contain no-repeat;
      opacity:.06;filter:grayscale(100%);pointer-events:none
    }
    .brand-header{display:flex;align-items:center;justify-content:space-between;gap:12px;border-bottom:1px solid rgba(2,6,12,.08);padding-bottom:10px;margin-bottom:14px}
    .brand-left{display:flex;align-items:center;gap:12px}
    .brand-left img{width:44px;height:44px;border-radius:10px}
    .brand-title .name{font-weight:900;color:var(--brand);font-size:1.25rem}
    .brand-title .sub{color:var(--muted);font-size:.95rem}

    .report-header{
      text-align:center;background:var(--accent);border:1px solid rgba(2,6,12,.06);
      border-radius:12px;padding:18px;margin:6px 0 16px
    }
    .report-header h2{margin:0 0 6px;color:var(--brand);font-size:1.9rem}
    .report-header h3{margin:0;font-size:1.7rem;font-weight:900}
    .report-header .meta{margin-top:8px;color:var(--muted);font-size:1rem;line-height:1.6}

    .kpi{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0}
    .pill{padding:6px 10px;border-radius:999px;border:1px solid #e5e7eb;background:#fff}
    .small{color:var(--muted);font-size:.92rem}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;border-bottom:1px dashed rgba(2,6,12,.08);text-align:start}
    th{color:var(--muted);font-weight:800}
    .ayah{font-family:"UthmaniHafs","Scheherazade New",serif;font-size:1.35rem;line-height:2}
    .ayah-target{color:#15803d !important;font-weight:800;font-size:1.22em;background:#e6f4ea;border-radius:6px;padding:0 .25em}

    .report-qr{
      position:absolute;right:16px;bottom:16px;display:flex;align-items:center;gap:10px;
      background:rgba(255,255,255,.9);border:1px solid rgba(2,6,12,.08);border-radius:10px;padding:8px 10px;
      box-shadow:0 4px 16px rgba(2,6,12,.05)
    }
    [dir="ltr"] .report-qr{right:auto;left:16px}
    .report-qr-canvas{width:80px;height:80px}
    .report-qr small{color:var(--muted)}

    .toolbar{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin:8px 0}
    .btn{border:1px solid #e2e8f0;background:#fff;color:#0f172a;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:700}
    .btn.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
    .btn.ghost{background:transparent;color:var(--brand);border-color:var(--brand)}

    @media print{
      .toolbar{display:none !important}
      .report-page{box-shadow:none;border:none;page-break-after:always}
      @page{size:A4;margin:14mm 12mm 18mm}
      .print-footer{position:fixed;bottom:0;left:0;right:0;text-align:center;color:#6b7280;font-size:11px}
      .print-footer::after{content:"— Page " counter(page) " of " counter(pages) " — Tajweedy"}
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
  <div class="container">
    <div class="toolbar">
      <button id="toggleEn" class="btn ghost">إظهار الصفحة الإنجليزية</button>
      <button id="toggleTheme" class="btn">🌙/☀️</button>
      <button id="printPDF" class="btn primary">تصدير PDF</button>
      <a href="./quiz.html" class="btn">رجوع للاختبار</a>
      <a href="./reports-index.html" class="btn ghost">سجلّ التقارير</a>
    </div>

    <section id="pageAr" class="report-page" dir="rtl" lang="ar">
      <div class="brand-header">
        <div class="brand-left">
          <img src="./assets/logo/tajweedy-logo.png" alt="Tajweedy"/>
          <div class="brand-title">
            <div class="name">Tajweedy</div>
            <div class="sub">تقارير الأداء والإحصاءات</div>
          </div>
        </div>
      </div>
      <div id="reportHeaderAr" class="report-header"></div>
      <div class="kpi" id="kpiAr"></div>
      <h3 class="small">تفاصيل الأسئلة</h3>
      <table id="tableAr"><thead><tr><th>#</th><th>نص السؤال</th><th>إجابتك</th><th>الصحيح</th><th>النتيجة</th></tr></thead><tbody></tbody></table>
      <div class="report-qr" title="رابط التقرير على النظام">
        <canvas id="qrAr" class="report-qr-canvas"></canvas><small>Scan to open</small>
      </div>
    </section>

    <section id="pageEn" class="report-page" dir="ltr" lang="en" hidden>
      <div class="brand-header">
        <div class="brand-left">
          <img src="./assets/logo/tajweedy-logo.png" alt="Tajweedy"/>
          <div class="brand-title">
            <div class="name">Tajweedy</div>
            <div class="sub">Reports & Analytics</div>
          </div>
        </div>
      </div>
      <div id="reportHeaderEn" class="report-header"></div>
      <div class="kpi" id="kpiEn"></div>
      <h3 class="small">Question details</h3>
      <table id="tableEn"><thead><tr><th>#</th><th>Question</th><th>Your answer</th><th>Correct</th><th>Result</th></tr></thead><tbody></tbody></table>
      <div class="report-qr" title="Open report in system">
        <canvas id="qrEn" class="report-qr-canvas"></canvas><small>Scan to open</small>
      </div>
    </section>

    <div class="print-footer"></div>
  </div>

  <script src="./reports.js"></script>
</body>
</html>