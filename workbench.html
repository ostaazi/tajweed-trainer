<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tajweedy — التدريبات والاختبارات</title>
  <style>
:root{
  --bg: #f7f8fa;
  --card:#fff;
  --ink:#0f172a;
  --muted:#64748b;
  --accent:#0ea5a7;
  --ring:#dfe3ea;
}
:root.dark{
  --bg: #0b1220;
  --card:#0f182a;
  --ink:#e6edf6;
  --muted:#93a4bd;
  --accent:#22d3ee;
  --ring:#203045;
}
*{box-sizing:border-box}
html{font-family: "Noto Naskh Arabic", "Amiri", system-ui, -apple-system, Segoe UI, Roboto, Arial; font-size:16px;}
body{margin:0;background:var(--bg);color:var(--ink);}
.container{max-width:960px;margin:auto;padding:16px}
.header{display:flex;align-items:center;gap:12px;justify-content:space-between}
.brand{display:flex;align-items:center;gap:12px}
.brand img{width:52px;height:52px;border-radius:12px}
h1{font-size:2.2rem;margin:12px 0}
h2{font-size:1.4rem;margin:18px 0 8px}
.card{background:var(--card);border:1px solid var(--ring);padding:16px;border-radius:16px;box-shadow:0 2px 10px rgba(0,0,0,.04);margin:12px 0}
.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
select,button,input[type=text]{padding:10px 12px;border-radius:10px;border:1px solid var(--ring);background:var(--bg);color:var(--ink)}
button{background:var(--accent);border:none;color:#08272b;cursor:pointer}
button:disabled{opacity:.5;cursor:not-allowed}
.muted{color:var(--muted)}
.list{display:grid;gap:12px}
.q{border:1px dashed var(--ring);border-radius:12px;padding:12px}
.q h3{margin:0 0 8px}
.opt{display:flex;align-items:center;gap:8px;margin:6px 0}
hr{border:none;height:1px;background:var(--ring);margin:16px 0}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border:1px solid var(--ring);padding:8px;text-align:right;vertical-align:top}
.badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#eef; border:1px solid var(--ring)}
.footer{padding:24px 16px;text-align:center;color:var(--muted)}
.tools{position:fixed;inset-inline-start:12px;top:12px;display:flex;flex-direction:column;gap:8px;z-index:10}
.tools button{background:var(--card);color:var(--ink)}
.copy-box{display:flex;gap:8px;align-items:center}
pre.console{background:#0b1020;color:#a7f3d0;padding:12px;border-radius:10px;overflow:auto;max-height:280px}
.kbd{border:1px solid var(--ring);padding:1px 6px;border-radius:6px;background:var(--card)}
.hidden{display:none}
</style>
</head>
<body>
  <div class="tools">
    <button id="modeBtn">الوضع الليلي</button>
  </div>
  <header class="container header">
    <div class="brand">
      <img src="assets/logo.png" alt="Tajweedy" />
      <div>
        <h1>التدريبات والاختبارات</h1>
        <div class="muted">أسئلة مُحمّلة من questions_bank.json + تمارين علاجية من therapy_exercises.json</div>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card">
      <h2>اختبار القواعد (اختيار من متعدد)</h2>
      <div class="row">
        <label>اختر القسم</label>
        <select id="quizSection">
          <option value="noon_tanween">النون الساكنة والتنوين</option>
          <option value="meem_sakinah">الميم الساكنة</option>
          <option value="madd">أحكام المدود</option>
        </select>
        <button id="buildQuizBtn">ابدأ اختبار (٥ أسئلة عشوائيًا)</button>
        <button id="buildFullQuizBtn">اختبار شامل (١٥ سؤالًا: ٥ من كل حكم)</button>
      </div>
      <div id="quizArea"></div>
    </section>

    <section class="card">
      <h2>تمارين علاجية</h2>
      <div class="row">
        <label>القسم</label>
        <select id="therapySection">
          <option value="noon_tanween">النون الساكنة والتنوين</option>
          <option value="meem_sakinah">الميم الساكنة</option>
          <option value="madd">المدود</option>
        </select>
        <label>الحكم الفرعي</label>
        <select id="therapySub"></select>
        <button id="startTherapyBtn">بدء تدريب (٣٠ سؤالًا متدرجًا)</button>
      </div>
      <div id="therapyArea"></div>
    </section>
  </main>

  <footer class="footer"><a href="index.html">العودة للرئيسية</a></footer>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
  <script>
    taj.initModeToggle();
    taj.initQuiz();
    taj.initTherapy();
  </script>
</body>
</html>
