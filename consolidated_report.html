<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tajweedy â€” ØªÙ‚Ø±ÙŠØ± Ù…Ø¬Ù…Ù‘Ø¹</title>
<link rel="stylesheet" href="styles.css"/>
<style>
.container{max-width:980px;margin:24px auto;padding:0 16px}
.card{background:var(--tj-surface,#fff);border:1px solid var(--tj-border,#e5e7eb);border-radius:14px;padding:16px;margin:12px 0}
.table{width:100%;border-collapse:collapse}
.table th,.table td{border:1px solid var(--tj-border,#e5e7eb);padding:8px;text-align:center;vertical-align:top}
.badge{padding:2px 8px;border-radius:10px;border:1px solid var(--tj-border,#e5e7eb);display:inline-block}
.ok{color:#0b6} .no{color:#b00}
</style>
</head>
<body>
<header class="container">
  <h1>ğŸ“„ ØªÙ‚Ø±ÙŠØ± Ù…Ø¬Ù…Ù‘Ø¹ Ù„Ù„Ù…Ø­Ø§ÙˆÙ„Ø§Øª</h1>
  <div class="muted">ÙŠÙ…ÙƒÙ† Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ØµÙØ­Ø©/Ø­ÙØ¸Ù‡Ø§ ÙƒÙ€ PDF.</div>
</header>
<main class="container">
  <div class="card">
    <button onclick="history.back()">â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø©</button>
    <button onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
  </div>

  <section class="card">
    <table class="table" id="tbl">
      <thead>
        <tr><th>#</th><th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th>Ø§Ù„Ù…ØªØ¯Ø±Ù‘Ø¨</th><th>Ø§Ù„Ù‚Ø³Ù…</th><th>Ø§Ù„Ù†ØªÙŠØ¬Ø©</th><th>ØªØ­Ù„ÙŠÙ„ Ù…ÙˆØ¬Ø²</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </section>
</main>

<script>
(function(){
  const arr = JSON.parse(localStorage.getItem('tajweedy_progress_full')||'[]');
  const map={noon_tanween:'Ø§Ù„Ù†ÙˆÙ† Ø§Ù„Ø³Ø§ÙƒÙ†Ø© ÙˆØ§Ù„ØªÙ†ÙˆÙŠÙ†',meem_sakinah:'Ø§Ù„Ù…ÙŠÙ… Ø§Ù„Ø³Ø§ÙƒÙ†Ø©',madd:'Ø£Ø­ÙƒØ§Ù… Ø§Ù„Ù…Ø¯ÙˆØ¯',full:'Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„',custom:'Ù…Ø®ØµØµ'};
  const tb=document.querySelector('#tbl tbody');
  if(!arr.length){ tb.innerHTML='<tr><td colspan=6>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ù…Ø­ÙÙˆØ¸Ø©.</td></tr>'; return; }
  arr.forEach((r,i)=>{
    const tr=document.createElement('tr');
    const dt=new Date(r.ts||Date.now()).toLocaleString('ar-EG');
    const txt = (r.analysis&&r.analysis.text)||'';
    tr.innerHTML = `<td>${i+1}</td><td>${dt}</td><td>${r.traineeName||''}</td><td>${map[r.sectionKey]||r.sectionKey||''}</td>
      <td><span class="badge">${r.correct}/${r.total}</span></td><td style="text-align:right">${txt}</td>`;
    tb.appendChild(tr);
  });
})();
</script>
</body>
</html>